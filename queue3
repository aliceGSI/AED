#include <iostream>
using namespace std;

class queue
{
private:
    int* cola;
    int* head;
    int* tail;
    int* end;
    bool full;
public:
    queue(int cap);
    ~queue();
    bool push(int val);
    int pop();
    bool lleno();
    bool vacio();
    void print();
};

queue::queue(int cap)
{
    cola = new int[cap];
    head = cola;
    tail = cola;
    end = cola + cap;
    full = false;
}

queue::~queue()
{
    delete[] cola;
}

bool queue::push(int val)
{
    if (lleno())
        return false;
    *tail = val;
    tail++;
    if (tail == end)
        tail = cola;
    if (tail == head)
        full = true;
    return true;
}

int queue::pop()
{
    if (vacio())
        return -1;
    int val = *head;
    head++;
    if (head == end)
        head = cola;
    full = false;
    return val;
}

bool queue::lleno()
{
    return (head == tail && full);
}

bool queue::vacio()
{
    return (head == tail && !full);
}

/*
void queue::print()
{
    if (vacio()) {
        cout << "Cola vacia" << endl;
        return;
    }
    int* p = head;
    do {
        cout << *p << " ";
        p++;
        if (p == end)
            p = cola;
    } while (p != tail || (p == tail && full));
    cout << endl;
}
*/
void queue::print() 
{
    if (vacio()) 
    {
        cout << "Cola vacia" << endl;      
        return; 
    }  
    int* p = head; 
    while (true)
    { 
        cout << *p << " ";    
        if (p == tail && !full)       
            break;        
        p++;   
        if (p == end)        
            p = cola;    
        if (p == tail && !full)     
            break;  
        if (p == head && full)       
            break; 
    }   
    cout << endl;
}


int main()
{
    queue q(10);

    cout << "\nInsertando 10 elementos" << endl;
    int i = 1;
    while (i <= 10)
    {
        q.push(i);
        cout << "Encolado: " << i << " -> ";
        q.print();
        i++;
    }

    cout << "\nDesencolando 5 num" << endl;
    int j = 0;
    while (j < 5)
    {
        int x = q.pop();
        if (x != -1) {
            cout << "Se desencolo: " << x << " -> ";
            q.print();
        }
        j++;
    }

    cout << "\nInsertando 3 elementos mas (11, 12, 13)" << endl;
    int k = 11;
    while (k <= 13)
    {
        q.push(k);
        cout << "Encolado: " << k << " -> ";
        q.print();
        k++;
    }

    cout << "\nfin" << endl;
    q.print();
    return 0;
}
